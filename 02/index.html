<html>
  <head>
    <script type="text/javascript" src="https://get.goXTK.com/xtk_edge.js"> </script> 
    <script type="text/javascript" src="loader.js"></script>
    <title>CS460.org Assignment 2</title>
    <style>
      body {
        background-color:#000;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden !important; 
      }
    </style>
    <script>

      window.onload = function() {

      r = new X.renderer3D();
      r.init(); 
      CAMERAS = [];

      c = new X.cube();
      c.center = [0, 0, 0]; // x y z
      CUBE_SIDELENGTH = 10;
      GAP = 2;
      camera = new X.camera(0,0); 
      isSpinning = false; 
    
      r.add(c);

      r.render();

      };
    
      window.onkeypress = function (e) {
        console.log(e);
        // MOVEMENT KEYS

        if (e.code == 'KeyD') {
          console.log('D was pressed')
          c.transform.translateX(-CUBE_SIDELENGTH - GAP);
        }

        else if (e.code == 'KeyA') {
          console.log('A was pressed')
          c.transform.translateX(CUBE_SIDELENGTH + GAP);
        }

        else if (e.code == 'KeyQ') {
          console.log('Q was pressed')
          c.transform.translateY(CUBE_SIDELENGTH + GAP);
        }

        else if (e.code == 'KeyE') {
          console.log('E was pressed')
          c.transform.translateY(-CUBE_SIDELENGTH - GAP);
        }
        else if (e.code == 'KeyW') {
          console.log('W was pressed')
          c.transform.translateZ(CUBE_SIDELENGTH + GAP);
        }

        else if (e.code == 'KeyS') {
          console.log('S was pressed')
          c.transform.translateZ(-CUBE_SIDELENGTH - GAP);
        }

        // COLORS

        if (e.code == 'Digit1') {
          c.color = [1,1,1];
        }

        else if (e.code == 'Digit2') {
          c.color = [1,0,0];
        }

        else if (e.code == 'Digit3') {
          c.color = [0,1,0];
        }

        else if (e.code == 'Digit4') {
          c.color = [0,0,1];
        }
        else if (e.code == 'Digit5') {
          c.color = [1,1,0];
        }
        else if (e.code == 'Digit6') {
          c.color = [1,0,1];
        }
        else if (e.code == 'Digit7') {
          c.color = [0,1,1];
        }
        else if (e.code == 'Digit0') {
          c.color = [0,0,0];
        }
        // NEW CUBE

        else if (e.code == 'Space') {
          new_cube = new X.cube();
          new_cube.color = c.color;
          new_cube.transform.matrix = new Float32Array(c.transform.matrix);
          new_cube.lengthX = new_cube.lengthY = new_cube.lengthZ = CUBE_SIDELENGTH;

          r.add(new_cube);
        }

        // DOWNLOAD AND UPLOAD

        if (e.code == 'KeyO') {
          console.log('O was pressed')
          download();
        }

        else if (e.code == 'KeyL') {
          upload('scene.json');
        }
        
        if (e.code == 'KeyB') {
          isSpinning = !isSpinning;
        }
        r.onRender = function() {
          if(isSpinning) {
            r.camera.rotate([1,0]);
          }
        }

        //camera view

        if (e.code == 'KeyC') {
          new_cam_value = new Float32Array(Object.values(r.camera.view));
          CAMERAS.push(new_cam_value);
          console.log(new_cam_value);
        }

        
    }
   


    </script>
    
    
  </head>
  
  <body>
  </body>
</html>
