<html>
  <head>
    <title>CS460.org Assignment 2</title>
    <style>
      body {
        background-color:#000;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden !important; 
      }
    </style>
      <script type="text/javascript" src="https://get.goXTK.com/xtk_edge.js"></script>
      <script src="loader.js"></script>
      <script type="text/javascript">
        const CUBE_SIDELENGTH = 10;
        const GAP = 2;
        const CAMERAS=[];
        var interval=null;
        
        
        window.onkeypress = function(e) {
          if (e.code === 'KeyO') {
            download();
          }
           else if (e.code === 'KeyL') {
            upload("scene.json");
          }
          else if (e.code === 'KeyC') {
            console.log("camera view stored");
          CAMERAS.push(new Float32Array(r.camera.view));
          }
          else if(e.code=='KeyV')
          {
            console.log("start cycle on V");
            if (interval === null) {
             interval = setInterval(() => {
            const nextCamera = CAMERAS.shift();
            if (nextCamera !== undefined) {
              r.camera.view = new Float32Array(nextCamera);
            }
             }, 1000);
            } else {
              console.log("stop cycle on V");
              clearInterval(interval);
              interval = null;
            }
            }
          else if (e.code === 'Digit0') {
              c.color = [0, 0, 0]; // Black
            }
             else if (e.code === 'Digit1') {
              c.color = [1, 1, 1]; // White
            }
            else if (e.code === 'Digit2') {
              c.color = [1, 0, 0];// Red
            }
             else if (e.code === 'Digit3') {
              c.color = [0, 1, 0]; // Green
            }
             else if (e.code === 'Digit4') {
              c.color = [0, 0, 1]; // Blue
            }
             else if (e.code === 'Digit5') {
              c.color = [1, 1, 0]; // Yellow
            }
             else if (e.code === 'Digit6') {
              c.color = [1, 0, 1]; // Pink
            }
             else if (e.code === 'Digit7') {
              c.color = [0, 1, 1]; // Cyan
            }  
            else if (e.code == 'KeyD') {
            //console.log("D pressed");
          c.transform.translateX(-CUBE_SIDELENGTH - GAP);}
          else if (e.code == 'KeyA') {
            //console.log("A pressed");
          c.transform.translateX(CUBE_SIDELENGTH + GAP);}
          else if (e.code == 'KeyW') {
            //console.log("W pressed");
          c.transform.translateZ(CUBE_SIDELENGTH + GAP);} 
        else if (e.code == 'KeyS') {
          //console.log("S pressed");
          c.transform.translateZ(-CUBE_SIDELENGTH - GAP);} 
        else if (e.code == 'KeyE') {
          //console.log("E pressed");
          c.transform.translateY(-CUBE_SIDELENGTH - GAP);} 
        else if (e.code == 'KeyQ') {
          //console.log("Q pressed");
          c.transform.translateY(CUBE_SIDELENGTH + GAP);}
          else if (e.code === 'Space') { 
          const new_cube = new X.cube();
          new_cube.color = c.color;
          new_cube.transform.matrix = new Float32Array(c.transform.matrix);
          new_cube.lengthX = new_cube.lengthY = new_cube.lengthZ = CUBE_SIDELENGTH;
          r.add(new_cube);
  }
        
      };
   
        window.onload = function() {
          console.log('loaded.');
          r = new X.renderer3D();
          r.init();
          c = new X.cube();
          r.add(c);
          r.render();
   
        };
   
   
      </script>
  </head>
  <body>
  </body>
</html>